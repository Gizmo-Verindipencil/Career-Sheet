import{Buildable}from"../interface/buildable.min.js";import{CareerSheetModel}from"../model/career-sheet-model.min.js";import{Utility}from"../shared/utility.min.js";import{PageColorAdjuster}from"../shared/page-color-adjuster.min.js";import ScriptSeriesLoader from"../shared/script-series-loader.min.js";class Constant{static get completeExecute(){return"execute"}}class CareerSheetController extends Buildable{constructor(){super(),this.model=new CareerSheetModel,this.scriptLoader=ScriptSeriesLoader,this.scriptLoader.add("https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"),this.scriptLoader.load(),this.urls=[],this.urls.push("core-information.html"),this.urls.push("work-experience.html"),this.urls.push("qualification.html"),this.urls.push("statistics.html"),this.urls.push("supplementary.html")}getPageColorAdjuster=()=>{if(!this.pageColorAdjuster)throw"Error: instance of the class needs to be created with 'buildâ€™.";return this.pageColorAdjuster};static build=async()=>{const e=new CareerSheetController;for(;e.scriptLoader.running;)await Utility.sleep(2e3);const t=await PageColorAdjuster.build();return t.addKey(Constant.completeExecute),e.urls.forEach((e=>t.addKey(e))),e.pageColorAdjuster=t,e};execute=()=>{this.appendPages(this.urls);this.getPageColorAdjuster().changeBackgroundColorWhenLastFunctionCall(Constant.completeExecute),$("body").addClass("loaded")};appendPages=()=>{const e=()=>{if(0===this.urls.length)return;const t=this.urls.shift();$.ajax({type:"GET",url:t,async:!0,success:r=>{const s=$(r);$("body").append(s),s.ready((()=>{this.getPageColorAdjuster().changeBackgroundColorWhenLastFunctionCall(t)})),e()}})};e()}}export{CareerSheetController};