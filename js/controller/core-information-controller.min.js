import{createInstance}from"../keyword/create-instance.min.js";import{Buildable}from"../interface/buildable.min.js";import{CoreInformationModel}from"../model/core-information-model.min.js";import{Utility}from"../shared/utility.min.js";import{PageColorAdjuster}from"../shared/page-color-adjuster.min.js";import ScriptSeriesLoader from"../shared/script-series-loader.min.js";import StylesheetSeriesLoader from"../shared/stylesheet-series-loader.min.js";class CoreInformationController extends Buildable{constructor(){super(),this.model=new CoreInformationModel,this.scriptLoader=ScriptSeriesLoader,this.scriptLoader.add("https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"),this.scriptLoader.load(),this.stylesheetLoader=StylesheetSeriesLoader,this.stylesheetLoader.add("css/destyle.min.css"),this.stylesheetLoader.add("css/restyle.min.css"),this.stylesheetLoader.add("css/common.min.css"),this.stylesheetLoader.add("css/core-information.min.css"),this.stylesheetLoader.load()}static build=async()=>{const e=new CoreInformationController;for(;e.scriptLoader.running||e.stylesheetLoader.running;)await Utility.sleep(2e3);return e};execute=async()=>{const e=this.model.getCoreInformation();this.setNameAndPhonetic(e),this.setBirthAndAge(e),this.setJoiningCurrentCompany(e),this.setSex(e),this.setZipCodeAndAddress(e),this.setLocalStation(e),this.setAcademicBackground(e);(await createInstance(PageColorAdjuster)).changeBackgroundColor()};setNameAndPhonetic=e=>{const t=(e,t)=>e.length>t.length?e.length:t.length,n=t(e.familyName,e.phoneticFamilyName),a=t(e.lastName,e.phoneticLastName),i=(e,t,n,a)=>{const i=(e,t)=>{for(;e.length<t;)e+="　";return e};return`${i(e,t)}  ${i(n,a)}`},s=i(e.familyName,n,e.lastName,a);$("input[name='fullName']").val(s);const o=i(e.phoneticFamilyName,n,e.phoneticLastName,a);$("input[name='phonetic']").val(o)};setBirthAndAge=e=>{const t=e.birth.split("-");if(!t[0]||!t[1]||!t[2])return $("input[name='birth']").val("不明"),void $("input[name='age']").val("不明");const n=`${t[0]}年${t[1]}月${t[2]}日`;$("input[name='birth']").val(n);const a=new Date,i=new Date(t[0],t[1],t[2]);let s=a.getFullYear()-i.getFullYear();const o=new Date(a.getFullYear(),i.getMonth(),i.getDate());a<o&&s--,$("input[name='age']").val(`${s}歳`)};setJoiningCurrentCompany=e=>{const t=e.joiningCurrentCompany.split("-");if(!t[0]||!t[1]||!t[2])return void $("input[name='joiningCurrentCompany']").val("不明");const n=`${t[0]}年${t[1]}月${t[2]}日`;$("input[name='joiningCurrentCompany']").val(n)};setSex=e=>{$("input[name='sex']").val(e.sex)};setZipCodeAndAddress=e=>{const t=`〒${e.address.zipCode}`;$("input[name='zipCode']").val(t);const n=`  ${e.address.prefecture}  ${e.address.municipality}`;$("input[name='address']").val(n)};setLocalStation=e=>{$("input[name='localLine']").val(`${e.localStation.line}  線`),$("input[name='localStation']").val(`${e.localStation.name}  駅`)};setAcademicBackground=e=>{const t=t=>{$(`input[name='${t}']`).val(e.academicBackground[t]);const n=e.academicBackground[t+"Date"].split("-");if(!n[0]||!n[1])return void $(`input[name='${t}Date']`).val("");let a=`${n[0]}年${n[1]}月  卒業`;$(`input[name='${t}Date']`).val(a)};t("education"),t("other")}}export{CoreInformationController};