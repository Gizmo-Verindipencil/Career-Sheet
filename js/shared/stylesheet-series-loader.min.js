import{AbsoluteURIConverter}from"./absolute-uri-converter.min.js";class StylesheetSeriesLoader{constructor(){this.sources=[],this.importedSources=[],this.running=!1,this.absoluteURIConverter=new AbsoluteURIConverter;for(let e of document.getElementsByTagName("link"))e.href&&this.importedSources.push(e.href)}add=e=>{let t=e;this.absoluteURIConverter.isAbsoluteURI(t)||(t=this.absoluteURIConverter.convert(t)),this.sources.includes(t)||this.importedSources.includes(t)||this.sources.push(t)};load=(e,t)=>{if(0===this.sources.length)return this.running=!1,void(e&&e());this.running=!0;const s=document.createElement("link");s.rel="stylesheet",s.href=this.sources.shift(),s.onerror=()=>{t&&t()},s.onload=()=>{this.load(e,t)},document.head.appendChild(s),this.importedSources.push(s.href)}}export default new StylesheetSeriesLoader;