import{AbsoluteURIConverter}from"./absolute-uri-converter.js";class ScriptSeriesLoader{constructor(){this.sources=[],this.importedSources=[],this.running=!1,this.absoluteURIConverter=new AbsoluteURIConverter;for(let e of document.getElementsByTagName("script"))e.src&&this.importedSources.push(e.src)}add=e=>{let s=e;this.absoluteURIConverter.isAbsoluteURI(s)||(s=this.absoluteURIConverter.convert(s)),this.sources.includes(s)||this.importedSources.includes(s)||this.sources.push(s)};load=(e,s)=>{if(0===this.sources.length)return this.running=!1,void(e&&e());this.running=!0;const t=document.createElement("script");t.src=this.sources.shift(),t.onerror=()=>{s&&s()},t.onload=()=>{this.load(e,s)},document.head.appendChild(t),this.importedSources.push(t.src)}}export default new ScriptSeriesLoader;